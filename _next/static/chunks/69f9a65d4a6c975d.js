(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99145,e=>{"use strict";e.s(["AdminTable",()=>l]);var a=e.i(43476);function l(e){let{title:l,data:s,columns:r,rowKey:t=(e,a)=>a,className:n=""}=e;return(0,a.jsxs)("div",{className:"card ".concat(n),children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("p",{className:"card-title",children:l})}),(0,a.jsx)("div",{className:"card-body p-0",children:(0,a.jsx)("div",{className:"relative h-auto w-full overflow-auto rounded-none [scrollbar-width:_thin]",children:(0,a.jsxs)("table",{className:"table table-fixed w-full min-w-[700px] border-collapse",children:[(0,a.jsx)("thead",{className:"table-header",children:(0,a.jsx)("tr",{className:"table-row",children:r.map((e,l)=>(0,a.jsx)("th",{className:"table-head ".concat(e.className||""),children:e.header},l))})}),(0,a.jsx)("tbody",{className:"table-body",children:0===s.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:r.length,className:"text-center py-6 text-gray-500",children:"No data available"})}):s.map((e,l)=>(0,a.jsx)("tr",{className:"table-row",children:r.map((s,r)=>{var t;return(0,a.jsx)("td",{className:"table-cell ".concat(s.className||""),children:s.render?s.render(e,l):null!=(t=e[s.accessor])?t:""},r)})},t(e,l)))})]})})})]})}},97234,e=>{"use strict";e.s(["subscribeToUsers",()=>s,"toggleUserRole",()=>r]),e.i(36180);var a=e.i(98925),l=e.i(78122);function s(e){let s=(0,a.query)((0,a.collection)(l.db,"users"));return(0,a.onSnapshot)(s,a=>{e(a.docs.map(e=>{var a,l,s,r;let t=e.data();return{id:e.id,firstName:null!=(a=t.firstName)?a:"",lastName:null!=(l=t.lastName)?l:"",email:null!=(s=t.email)?s:"",role:null!=(r=t.role)?r:"user"}}))})}async function r(e,s){let r="admin"===s?"user":"admin";return await (0,a.updateDoc)((0,a.doc)(l.db,"users",e),{role:r}),r}},61236,e=>{"use strict";e.s(["default",()=>c],61236);var a=e.i(43476),l=e.i(71645),s=e.i(97234),r=e.i(99145);e.i(36180);var t=e.i(98925),n=e.i(78122),i=e.i(28910);function o(e){let{query:l,onChange:s,results:r,getLabel:t,onSelect:n,placeholder:o="Search...",className:c}=e;return(0,a.jsxs)("div",{className:(0,i.cn)("relative w-full max-w-sm",c),children:[(0,a.jsx)("input",{value:l,onChange:e=>s(e.target.value),placeholder:o,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),l&&r.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 mt-1 w-full rounded-md border border-gray-200 bg-white shadow-md max-h-56 overflow-auto",children:r.map((e,l)=>(0,a.jsx)("li",{onClick:()=>n(e),className:"px-3 py-2 text-sm cursor-pointer hover:bg-blue-50",children:t(e)},l))}),l&&0===r.length&&(0,a.jsx)("div",{className:"absolute z-10 mt-1 w-full rounded-md border border-gray-200 bg-white shadow-md text-gray-500 text-sm px-3 py-2",children:"No results found"})]})}let c=()=>{let{users:e,toggleRole:i}=function(){let[e,a]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=(0,s.subscribeToUsers)(e=>{a(e)});return()=>e()},[]),{users:e,toggleRole:async(e,a)=>{await (0,s.toggleUserRole)(e,a)}}}(),{queryText:c,setQueryText:d,results:m}=function(){let[e,a]=(0,l.useState)([]),[s,r]=(0,l.useState)(""),[i,o]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=(0,t.query)((0,t.collection)(n.db,"users")),l=(0,t.onSnapshot)(e,e=>{a(e.docs.map(e=>{var a,l,s,r;let t=e.data();return{id:e.id,firstName:null!=(a=t.firstName)?a:"",lastName:null!=(l=t.lastName)?l:"",email:null!=(s=t.email)?s:"",role:null!=(r=t.role)?r:"user"}}))});return()=>l()},[]),(0,l.useEffect)(()=>{if(!s.trim())return void o([]);o(e.filter(e=>e.email.toLowerCase().includes(s.toLowerCase())))},[s,e]),{queryText:s,setQueryText:r,results:i}}(),u=e.filter(e=>"admin"===e.role).map(e=>({...e,firstName:e.firstName||"Anonymous",lastName:e.lastName||"Anonymous"})),h=async e=>{"admin"!==e.role&&await i(e.id,e.role),d("")},b=[{header:"First Name",accessor:"firstName",className:"w-[100px]"},{header:"Last Name",accessor:"lastName",className:"w-[100px]"},{header:"Email",accessor:"email",className:"w-[200px]"},{header:"Role",render:e=>(0,a.jsxs)("button",{className:"flex items-center gap-2 justify-center px-3 py-1 rounded-md bg-green-600 text-white text-sm font-medium hover:bg-green-700 transition-colors",children:[(0,a.jsx)("span",{children:"🛡️"}),"admin"===e.role?"Admin":"User"]})},{header:"Actions",render:e=>(0,a.jsxs)("button",{onClick:()=>i(e.id,e.role),className:"px-3 py-1 rounded text-sm ".concat("admin"===e.role?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 hover:bg-gray-400"),children:["Switch to ","admin"===e.role?"User":"Admin"]})}];return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add Admin by Email"}),(0,a.jsx)(o,{query:c,onChange:d,results:m,getLabel:e=>"".concat(e.email," (").concat(e.role,")"),onSelect:h,placeholder:"Search user by email..."})]}),(0,a.jsx)(r.AdminTable,{title:"Manage Admin Users",data:u,columns:b})]})}}]);